# @package _global_

defaults:
  - launcher: juelich
  - model: default
  - training: default
  - paths: juelich
  - datamodule: colon
  - _self_
  - override paths/anatomy: colon

############ Job specific configurations ############

name: human_colon_panel

# model:
#   litmodule:
#     img_enc_name: optimus
#     img_finetune: false
#     gene_enc_name: drvi
#     gene_finetune: false
#     img_proj: transformer
#     loss: CLIP
#     temperature: 0.07

# datamodule:
#   seed: 24442
#   batch_size: 256
#   num_workers: 4
#   pin_memory: false
#   persistent_workers: true

training:
  lightning:
    trainer:
      max_steps: 20_000
      devices: 1 # ${hydra:launcher.tasks_per_node}
      num_nodes: 1
      strategy: "ddp"
      accelerator: "gpu"
  train: true
  test:
    false
    # profiler: simple

  logger:
    wandb:
      project: colon_panel
#       # name: "uni-drvi-siglip"

############ Hydra specific configurations ############
hydra:
  job:
    name: human_colon_panel
  sweeper:
    params:
      model.litmodule.img_enc_name: gigapath, ctranspath
      model.litmodule.img_finetune: false #, true  # Lora finetune
      model.litmodule.img_proj: mlp #, mlp # linear
      model.litmodule.gene_enc_name: drvi, nicheformer #, generic, nicheformer # scFoundation
      model.litmodule.gene_finetune: true # lora or full fine-tune
      model.litmodule.gene_proj: linear # mlp
      model.litmodule.loss: CLIP # SIGLIP
      model.litmodule.temperature: 0.07 # 0.5
      datamodule.seed: 24442 #, 422244, 42424244
      datamodule.batch_size: 64 #, 256 #, 1024
      datamodule.num_workers: 4
      training.train: true
      training.test: false
